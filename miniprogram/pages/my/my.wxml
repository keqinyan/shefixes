<!--miniprogram/pages/my/my.wxml-->
<view class="my-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-header">
      <image class="user-avatar" src="{{userInfo.wechat_avatar || '/images/avatar-default.png'}}" mode="aspectFill"></image>
      <view class="user-info">
        <text class="user-name">{{userInfo.name || 'æœªç™»å½•'}}</text>
        <text class="user-phone">{{userInfo.phone}}</text>
        <view class="verified-status" wx:if="{{userInfo.realname_verified}}">
          <text class="verified-text">âœ“ å·²å®åè®¤è¯</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æˆ‘çš„é¢„çº¦ -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„é¢„çº¦</text>
    </view>

    <view class="loading-container" wx:if="{{isLoading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <view class="bookings-list" wx:else>
      <view
        class="booking-card"
        wx:for="{{bookings}}"
        wx:key="id"
      >
        <view class="booking-header">
          <text class="booking-service">{{item.service_type}}</text>
          <view class="booking-status {{item.status}}">
            <text>{{statusMap[item.status]}}</text>
          </view>
        </view>
        <text class="booking-desc">{{item.description}}</text>
        <view class="booking-meta">
          <text class="meta-item">ğŸ“… {{item.scheduled_date}} {{item.scheduled_time}}</text>
          <text class="meta-item">ğŸ“ {{item.address}}</text>
        </view>
      </view>

      <view class="empty-container" wx:if="{{bookings.length === 0}}">
        <text class="empty-text">æš‚æ— é¢„çº¦è®°å½•</text>
        <button class="btn-booking" bindtap="goToBooking">ç«‹å³é¢„çº¦</button>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-item" bindtap="handleLogout">
      <text class="menu-text">é€€å‡ºç™»å½•</text>
    </view>
  </view>
</view>
